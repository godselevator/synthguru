<!-- Modal Dialog -->
@model AOS.Platform.Models.AppViewModel
<div class="modal fade" id="soonlineloginmirror" role="dialog" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">A great choice!</h4>
            </div>
            <div class="modal-body ativa-scroll">
                <p>Before you continue your purchase of this app, you need to take the following steps:<br /></p>
                <p class="adwiza-label">First, you MUST be an administrator of your SuperOffice installation.</p>
                Administrator means you have access to the «settings & maintenance» and can configure your SuperOffice solution.
                You need to have this access to be able to approve apps for your company.<br /><br />
                If you <strong>are</strong> an administrator and want to continue your purchase, you will be redirected to the Super Office log-in page.
                Log-in using your SuperOffice CRM Online credentials and approve this app. This enables us to gather information about your SuperOffice installation and initiate the set-up. <br /><br />
                If you are <strong>not</strong>, just click cancel and contact your administrator and let him or her purchase the app
                <hr />
                <p class="adwiza-label">This app has mirroring enabled. You must read and accept the terms before you continue the purchase</p>
                <div class="panel panel-default" style="overflow-y: auto">
                    <div class="panel-heading">Terms of agreement</div>
                    <div class="panel-body">
                        <div class="form-group" style="padding: 5px 5px 5px 5px">
                            <div class="display-field" id="mirrordisclaimer">
                                @Html.Raw(Model.MirroringDisclaimer)
                            </div>
                        </div>
                        <div class="checkbox" style="padding-left: 25px">
                            <label><input type="checkbox" value="" id="acceptterms">I accept the terms</label>
                        </div>
                    </div>
                </div>
            </div>
            <div id="redirectUrl" hidden="hidden"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-success" id="confirm" disabled="disabled">Continue purchase</button>
            </div>
        </div>
    </div>
</div>
<!-- Dialog show event handler -->
<script type="text/javascript">

    $('#soonlineloginmirror').on('show.bs.modal', function (e) {
        // Get data-message attr from trigging button
        $message = $(e.relatedTarget).attr('data-message');
        $purchasetype = $(e.relatedTarget).attr('data-purchasetypetext');
        $title = $(e.relatedTarget).attr('data-title');

        $("#redirectUrl").text($message);
        $('#soonlineloginmirror').find("#confirm").text($purchasetype);
        $(this).find('.modal-title').text($title);

    });

    // Form confirm (yes/ok) handler, submits form
    $('#soonlineloginmirror').find('.modal-footer #confirm').on('click', function () {
        var url = $("#redirectUrl").text();
        window.location.href = url;
    });

    $("#acceptterms").click(function () {
        $('#soonlineloginmirror').find("#confirm").attr('disabled', !this.checked);
    });

</script>
<script type="text/javascript">
    $(document).ready(ajustamodal);
    $(window).resize(ajustamodal);
    function ajustamodal() {
        var altura = 320; //value corresponding to the modal heading + footer
        $(".ativa-scroll").css({ "height": altura, "overflow-y": "auto" });
    }
</script>